<!--The chat view-->
<!--<section class="container" ng-controller="ChatController">-->
<!--<div class="page-header">-->
<!--<h1>Chat Example</h1>-->
<!--</div>-->
<!--&lt;!&ndash; The message form &ndash;&gt;-->
<!--<form class="col-xs-12 col-md-offset-4 col-md-4" ng-submit="sendMessage();">-->
<!--<fieldset class="row">-->
<!--<div class="input-group">-->
<!--<input type="text" id="messageText" name="messageText" class="form-control" ng-model="messageText" placeholder="Enter new message">-->
<!--<span class="input-group-btn">-->
<!--<button type="submit" class="btn btn-primary" ng-disabled="!messageText.length">Submit</button>-->
<!--</span>-->
<!--</div>-->
<!--</fieldset>-->
<!--</form>-->
<!--<ul class="list-unstyled">-->
<!--&lt;!&ndash; List all messages &ndash;&gt;-->
<!--<li class="col-xs-12 col-md-offset-4 col-md-4 chat-message" ng-repeat="message in messages">-->
<!--<small class="pull-right text-muted" ng-bind="message.created | date:'dd/MM hh:mm'"></small>-->
<!--<img ng-src="{{message.profileImageURL}}" alt="{{message.username}}" class="pull-left chat-profile-image" />-->
<!--<div class="pull-left chat-message-details">-->
<!--<strong ng-class="{'text-danger' : authentication.user.roles.indexOf('admin') >= 0, 'text-success' : authentication.user.roles.indexOf('team') >= 0 }" ng-bind="message.username"></strong>-->
<!--<br>-->
<!--<span ng-bind="message.text"></span>-->
<!--</div>-->
<!--</li>-->
<!--</ul>-->
<!--</section>-->
<div ng-controller="ChatController" class="container-fluid">

    <div class="row chat-toolbar-row">
      <div class="col-sm-12">
        <div class="btn-group chat-toolbar" role="group" aria-label="...">
          <button id="chat-leave" ng-click="quitRoom(actualChannel.name)" class="btn btn-default ticket-option" type="button">
            <i class="glyphicon glyphicon-remove-sign"></i> Leave Chat
          </button>
          <button id="chat-invite" class="btn btn-default ticket-option" type="button">
            <i class="glyphicon glyphicon-plus"></i> Add User
          </button>
          <button id="chat-customer" class="btn btn-default ticket-option" type="button">
            <i class="glyphicon glyphicon-user"></i> Remove User
          </button>
          <button id="chat-create-ticket" class="btn btn-default ticket-option" type="button">
            <i class="glyphicon glyphicon-pencil"></i> Add Moderator
          </button>
          <button id="chat-add-ticket" class="btn btn-default ticket-option" type="button">
            <i class="glyphicon glyphicon-plus"></i> Delete Channel
          </button>
        </div>
      </div>
    </div>


</div>

<div class="table-grid table-grid-desktop">
  <div class="col col-md">
    <div class="pr">
      <!-- START mailbox list-->
      <div uib-collapse="channelsMenuCollapsed" class="mb-boxes">
        <div class="panel panel-default">
          <div class="panel-body">
            <ul class="nav nav-pills nav-stacked">
              <li class="p">
                <small class="text-muted">Channels</small>
              </li>
              <li ui-sref-active="active" ng-repeat="channel in channels">
                <a ng-click="joinRoom(channel)">
                  <em ng-class="channel.icon" class="fa fa-fw fa-lg"></em>
                  <span>{{channel.name}}</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- END mailbox list-->
    </div>
  </div>
  <div class="col">
    <!-- END action buttons-->
    <div class="panel panel-default">
      <div class="panel-body">
        <div class="row current-chat-area" >
          <div class="col-md-12">
            <ul class="media-list">
              <li ng-repeat="message in messages | orderBy: 'created' | filter: {room: actualChannel.name}" class="media">
                <div class="media-body">
                  <div class="media">
                    <a class="pull-left" ui-sref="app.profile.user({userId: message.user._id})">
                      <img class="chat-profile-image img-circle thumb64" ng-src="{{message.profileImageURL}}" alt="{{message.username}}">
                    </a>
                    <strong ng-class="{'text-danger' : authentication.user.roles.indexOf('admin') >= 0, 'text-success' : authentication.user.roles.indexOf('team') >= 0 }" ng-bind="message.username"></strong>
                    <br>
                    <div ng-bind-html="message.text | embed" class="media-body">

                    </div>
                    <div ng-if="isValid(message.text)" ng-init="neImageLong = false" ng-class="{false:'ne-image', true:'ne-image ne-image-long'}[neImageLong]">
                      <div class="ne-image-wrapper">
                        <img ng-src="{{message.text}}" ng-click="neImageLong=!neImageLong" alt=""/>
                      </div>
                    </div>
                  </div>
              </li>
            </ul>
          </div>
        </div>

        <div class="row">
          <form ng-submit="sendMessage();">
            <fieldset class="row">
              <div class="input-group">
                <input type="text" id="messageText" name="messageText" class="form-control" ng-model="messageText" placeholder="Enter new message">
                <span class="input-group-btn">
                <button type="submit" class="btn btn-primary" ng-disabled="!messageText.length">Submit</button>
              </span>
              </div>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
